## ----setup, include=FALSE-----------------------------------------------------
knitr::opts_chunk$set(echo = TRUE)

## -----------------------------------------------------------------------------
score <- list(name="李明", id = "PB1", age=19, scores=c(85, 76, 90))

## -----------------------------------------------------------------------------
score[[3]]
d<-Sys.time()
p<-as.POSIXlt(d)
cat(1900+p$year-score[[3]])

## -----------------------------------------------------------------------------
y<-score[[4]]
mean(y)

## -----------------------------------------------------------------------------
score$excellent<-'NO'
score

## -----------------------------------------------------------------------------
pat1<-read.csv("covid19.csv",header = TRUE,na.strings = "")
names(pat1)
head(pat1,n=3)

## -----------------------------------------------------------------------------
pat1[is.na(pat1$性别),]

## -----------------------------------------------------------------------------
pat1<-pat1[-which(is.na(pat1$性别)),]
pat1

## -----------------------------------------------------------------------------
summary(pat1$性别)
table(pat1$性别)

## -----------------------------------------------------------------------------
summary(pat1$入院时间)
table(pat1$入院时间)

## -----------------------------------------------------------------------------
aggregate(pat1$年龄,by=pat1["性别"],mean)
aggregate(pat1$年龄,by=pat1["性别"],max)
aggregate(pat1$年龄,by=pat1["性别"],min)

## -----------------------------------------------------------------------------
k<-as.data.frame(cut(pat1$年龄,c(1,10,20,30,40,50,60,70,100)))
colnames(k)<-"年龄段"
pat1<-cbind(pat1,k)
pat1

## -----------------------------------------------------------------------------
m<-table(pat1[,"年龄段"],pat1[,"性别"])
m
m1<-round(m/nrow(pat1)*100,1)
m1
write.csv(m,file="年龄性别分布.csv")

## -----------------------------------------------------------------------------
pat2<-read.csv("covid19-3.csv",header = TRUE,na.strings = "")
names(pat2)
head(pat2,n=3)

## -----------------------------------------------------------------------------
pat<-merge(pat1,pat2,by.x="序号",by.y = "序号",all.x = TRUE)
pat

## -----------------------------------------------------------------------------
pat[,"入院时间"] <- as.Date(as.character(pat[,"入院时间"]), format = "%Y%m%d")
pat[,"出院时间"] <- as.Date(as.character(pat[,"出院时间"]), format = "%Y%m%d")
pat[pat$住院时间<0,"入院时间"]<-as.Date("2020-02-05")
pat[,"住院时间"] <- as.numeric(pat[,"出院时间"] - pat[,"入院时间"]) + 1
pat[pat$吸烟=="有"&pat$年龄>40&pat$住院时间>10,c(2,4)]

## -----------------------------------------------------------------------------
n = 50
set.seed(0)
x = runif(n, min=-2, max=2)
y = x^3 + rnorm(n)

## -----------------------------------------------------------------------------
u=sort(x)
v=y[order(x)]
plot(u, v, xlab="x",ylab = "y",type='l')

## -----------------------------------------------------------------------------
plot(y~x,main=expression(y==x^3),col="red",cex=2)

## -----------------------------------------------------------------------------
plot(y~x,main=expression(y==x^3),col="red",cex=2,pch=ifelse(1:50%%2==1,1,16))

